# QRコードスキャナー

カメラでQRコードを読み取り、ローカルデータベースに保存するiOSアプリケーションです。

## 📱 機能

### 主要機能
- **QRコードスキャン**: カメラを使用してリアルタイムでQRコードを読み取り
- **データ保存**: 読み取ったQRコードをCore Dataに自動保存
- **履歴管理**: スキャンしたQRコードの履歴を一覧表示
- **詳細表示**: QRコードの詳細情報を確認・編集
- **メモ機能**: 各QRコードにメモを追加可能
- **URL検出**: URLを含むQRコードは直接開くことが可能
- **コピー機能**: QRコードの内容をクリップボードにコピー

### 画面構成
1. **履歴画面**: スキャン済みQRコードの一覧を表示
2. **スキャン画面**: カメラを使用してQRコードを読み取り
3. **詳細画面**: QRコードの詳細情報とメモの編集

## 🛠 技術スタック

- **言語**: Swift 5.0+
- **フレームワーク**: SwiftUI
- **カメラ**: AVFoundation
- **データベース**: Core Data
- **最小iOS**: iOS 15.0+

## 📦 プロジェクト構造

```
QRCodeScanner/
├── QRCodeScanner/
│   ├── QRCodeScannerApp.swift      # アプリケーションエントリーポイント
│   ├── ContentView.swift           # メインビュー（タブナビゲーション）
│   ├── Models/
│   │   ├── PersistenceController.swift  # Core Dataスタック管理
│   │   └── QRCodeData.xcdatamodeld/     # データモデル定義
│   ├── Views/
│   │   ├── CameraPreview.swift          # カメラプレビュー
│   │   ├── ScannerView.swift            # QRコードスキャン画面
│   │   ├── HistoryView.swift            # 履歴一覧画面
│   │   └── QRCodeDetailView.swift       # 詳細表示画面
│   ├── Services/
│   │   └── QRCodeScanner.swift          # QRコードスキャンサービス
│   └── Resources/
│       └── Info.plist                   # アプリケーション設定
└── QRCodeScanner.xcodeproj/
```

## 🚀 セットアップ

### 必要条件
- Xcode 14.0以降
- iOS 15.0以降をサポートするデバイスまたはシミュレーター
- カメラ機能を使用するため、実機でのテストを推奨

### インストール手順

1. **プロジェクトを開く**
   ```bash
   open QRCodeScanner.xcodeproj
   ```

2. **署名設定**
   - Xcodeでプロジェクトを開く
   - `Signing & Capabilities` タブを選択
   - 自分の開発チームを選択

3. **ビルド＆実行**
   - ターゲットデバイスを選択
   - `Command + R` でビルド＆実行

### カメラ権限

アプリ初回起動時にカメラへのアクセス許可を求められます。
Info.plistに以下の設定が含まれています：

```xml
<key>NSCameraUsageDescription</key>
<string>QRコードをスキャンするためにカメラへのアクセスが必要です</string>
```

## 📖 使い方

### QRコードをスキャンする

1. アプリを起動し、下部の「スキャン」タブをタップ
2. QRコードをカメラのフレーム内に配置
3. 自動的に読み取りが実行され、振動で通知
4. 読み取り結果を確認し、必要に応じてメモを追加
5. 「保存」をタップしてデータベースに保存

### 履歴を確認する

1. 下部の「履歴」タブをタップ
2. スキャン済みのQRコード一覧が新しい順に表示
3. QRコードをタップして詳細を表示
4. 左にスワイプして削除が可能

### 詳細を編集する

1. 履歴からQRコードをタップ
2. メモ欄でテキストを編集
3. URLの場合は「URLを開く」で直接アクセス可能
4. 「内容をコピー」でクリップボードにコピー
5. 「保存」をタップして変更を保存

## 🔧 データモデル

### QRCode Entity

| フィールド | 型 | 説明 |
|-----------|-----|------|
| id | UUID | 一意識別子 |
| content | String | QRコードの内容 |
| scannedDate | Date | スキャン日時 |
| note | String? | メモ（オプション） |

## 🎨 カスタマイズ

### スキャンフレームの色を変更

`ScannerView.swift` の以下の部分を編集：

```swift
RoundedRectangle(cornerRadius: 20)
    .stroke(Color.green, lineWidth: 3)  // ← この色を変更
```

### タブアイコンのカスタマイズ

`ContentView.swift` で各タブのアイコンとラベルを変更：

```swift
.tabItem {
    Label("履歴", systemImage: "clock")  // ← ここを変更
}
```

## 🐛 トラブルシューティング

### カメラが起動しない
- 「設定」→「プライバシー」→「カメラ」でアプリの権限を確認
- アプリを再起動

### QRコードが読み取れない
- QRコードが鮮明に表示されているか確認
- 十分な明るさがあるか確認
- カメラのフォーカスが合っているか確認

### データが保存されない
- デバイスのストレージ容量を確認
- アプリを再起動してCore Dataの初期化を確認

## 📝 今後の改善案

- [ ] QRコード生成機能の追加
- [ ] カテゴリー分類機能
- [ ] エクスポート/インポート機能
- [ ] 検索機能の追加
- [ ] ダークモード対応の最適化
- [ ] iPadレイアウトの最適化
- [ ] 複数QRコード同時スキャン

## 🔒 プライバシー

このアプリは以下のデータを収集します：
- QRコードの内容
- スキャン日時
- ユーザーが入力したメモ

すべてのデータはデバイスのローカルストレージ（Core Data）に保存され、外部サーバーに送信されることはありません。

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 👨‍💻 開発者

開発者情報やお問い合わせ先をここに記載してください。

---

**注意**: このアプリは実機でのテストを推奨します。シミュレーターではカメラ機能を使用できないため、QRコードのスキャンができません。
